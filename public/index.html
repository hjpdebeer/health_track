<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health Tracker</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navbar for mobile hamburger menu -->
    <nav class="navbar navbar-expand-md navbar-light bg-light d-md-none">
        <div class="container-fluid">
            <span class="navbar-brand d-flex align-items-center">
                <span class="me-2">üè•</span>
                <span class="fw-semibold text-primary">Health Tracker</span>
            </span>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar Navigation -->
            <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
                <div class="position-sticky pt-3">
                    <div class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-decoration-none">
                        <span class="fs-4 me-2">üè•</span>
                        <span class="fs-4 fw-semibold text-primary">Health Tracker</span>
                    </div>
                    
                    
                    <ul class="nav nav-pills flex-column mb-auto">
                        <li>
                            <a href="/" class="nav-link active" aria-current="page">
                                <span class="me-2">üìä</span>
                                Dashboard
                            </a>
                        </li>
                        <li>
                            <a href="/goals.html" class="nav-link text-dark">
                                <span class="me-2">üéØ</span>
                                Goals
                            </a>
                        </li>
                        <li>
                            <a href="/recommendations.html" class="nav-link text-dark">
                                <span class="me-2">ü§ñ</span>
                                AI Recommendations
                            </a>
                        </li>
                        <li>
                            <a href="/settings.html" class="nav-link text-dark">
                                <span class="me-2">‚öôÔ∏è</span>
                                Settings
                            </a>
                        </li>
                    </ul>
                    
                </div>
            </nav>
            
            <!-- Main Content -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">What Can I Help You Track Today?</h1>
                </div>
            
                <!-- Quick Stats -->
                <div class="row mb-4">
                    <div class="col-sm-6 col-lg-2">
                        <div class="card text-center">
                            <div class="card-body">
                                <div class="display-6 mb-2">üèãÔ∏è</div>
                                <h6 class="card-title">Current Weight</h6>
                                <h4 class="card-text text-primary" id="current-weight">--</h4>
                                <small class="text-muted">Last Updated</small>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-sm-6 col-lg-2">
                        <div class="card text-center">
                            <div class="card-body">
                                <div class="display-6 mb-2">üéØ</div>
                                <h6 class="card-title">Goal Weight</h6>
                                <h4 class="card-text text-success" id="goal-weight">--</h4>
                                <small class="text-muted">Target Goal</small>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-sm-6 col-lg-2">
                        <div class="card text-center">
                            <div class="card-body">
                                <div class="display-6 mb-2">üìä</div>
                                <h6 class="card-title">Progress</h6>
                                <h4 class="card-text text-info" id="progress">--</h4>
                                <small class="text-muted">Towards Goal</small>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-sm-6 col-lg-2">
                        <div class="card text-center">
                            <div class="card-body">
                                <div class="display-6 mb-2">üìè</div>
                                <h6 class="card-title">BMI</h6>
                                <h4 class="card-text text-warning" id="bmi-value">--</h4>
                                <small class="text-muted">Body Mass Index</small>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-sm-6 col-lg-2">
                        <div class="card text-center">
                            <div class="card-body">
                                <div class="display-6 mb-2">‚è∞</div>
                                <h6 class="card-title">Current Fast</h6>
                                <h4 class="card-text text-secondary" id="fast-status">Not Fasting</h4>
                                <small class="text-muted">Fasting Status</small>
                            </div>
                        </div>
                    </div>
                    
                </div>
            
                <!-- Health Modules -->
                <h2 class="mt-4 mb-3">Health Modules</h2>
                
                <div class="row g-4">
                    <!-- Weight Tracking -->
                    <div class="col-lg-4 col-md-6">
                        <div class="card h-100">
                            <div class="card-header bg-primary text-white">
                                <div class="d-flex align-items-center">
                                    <div class="display-6 me-3">üèãÔ∏è</div>
                                    <div>
                                        <h5 class="card-title mb-1">Weight Tracker</h5>
                                        <small>Log And Track Your Weight Progress</small>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body">
                                <form id="weight-form">
                                    <div class="row mb-3">
                                        <div class="col-sm-6">
                                            <input type="number" class="form-control" id="weight-input" placeholder="Weight" step="0.1" required>
                                        </div>
                                        <div class="col-sm-6">
                                            <input type="date" class="form-control" id="weight-date" required>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <textarea class="form-control" id="weight-notes" placeholder="Notes (optional)" rows="2"></textarea>
                                    </div>
                                    <button type="submit" class="btn btn-primary w-100">Log Weight</button>
                                </form>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Fasting Manager -->
                    <div class="col-lg-4 col-md-6">
                        <div class="card h-100">
                            <div class="card-header bg-warning text-dark">
                                <div class="d-flex align-items-center">
                                    <div class="display-6 me-3">‚è∞</div>
                                    <div>
                                        <h5 class="card-title mb-1" id="fasting-title">Fasting Manager</h5>
                                        <small>Track Your Intermittent Fasting</small>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body">
                                <div id="start-fasting-section">
                                    <div class="mb-3">
                                        <select class="form-select" id="fasting-duration">
                                            <option value="16">16:8 - 16 Hours Fasting / 8 Hours Eating</option>
                                            <option value="18">18:6 - 18 Hours Fasting / 6 Hours Eating</option>
                                            <option value="20">20:4 - 20 Hours Fasting / 4 Hours Eating</option>
                                            <option value="24">24:0 - 24 Hours Fasting / OMAD</option>
                                        </select>
                                    </div>
                                    
                                    <div class="row mb-3">
                                        <div class="col-sm-6">
                                            <input type="date" class="form-control" id="fast-start-date" required>
                                        </div>
                                        <div class="col-sm-6">
                                            <input type="time" class="form-control" id="fast-start-time" required>
                                        </div>
                                    </div>
                                    
                                    <button id="start-fast" class="btn btn-warning w-100">Start Fast</button>
                                </div>
                        
                                <div id="active-fast-section" style="display: none;">
                                    <div class="alert alert-success d-flex align-items-center" role="alert">
                                        <div class="spinner-grow spinner-grow-sm text-success me-3" role="status" aria-hidden="true"></div>
                                        <div>
                                            <strong>Fast In Progress</strong><br>
                                            <small>Started: <span id="fast-start-display"></span></small><br>
                                            <small>Duration: <span id="fast-duration-display"></span></small><br>
                                            <small>Remaining: <span id="time-remaining"></span></small>
                                        </div>
                                    </div>
                                    
                                    <div class="progress mb-3">
                                        <div class="progress-bar" role="progressbar" id="progress-fill" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    
                                    <div class="border-top pt-3">
                                        <div class="row g-2">
                                            <div class="col-12">
                                                <button id="end-fast-now" class="btn btn-outline-warning btn-sm w-100">End Now</button>
                                                <small class="text-muted d-block text-center">End Fast At Current Time</small>
                                            </div>
                                        </div>
                                        
                                        <div class="mt-3">
                                            <div class="row mb-2">
                                                <div class="col-sm-6">
                                                    <input type="date" class="form-control form-control-sm" id="break-date" required>
                                                </div>
                                                <div class="col-sm-6">
                                                    <input type="time" class="form-control form-control-sm" id="break-time" required>
                                                </div>
                                            </div>
                                            
                                            <textarea class="form-control form-control-sm mb-2" id="fast-notes" placeholder="How Did The Fast Go? Any Observations..." rows="2"></textarea>
                                            
                                            <button id="complete-fast" class="btn btn-success btn-sm w-100">Complete Fast</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Sleep Manager -->
                    <div class="col-lg-4 col-md-6">
                        <div class="card h-100">
                            <div class="card-header bg-info text-white">
                                <div class="d-flex align-items-center">
                                    <div class="display-6 me-3">üò¥</div>
                                    <div>
                                        <h5 class="card-title mb-1" id="sleep-title">Sleep Manager</h5>
                                        <small>Track Your Sleep Patterns</small>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body">
                                <div id="start-sleep-section">
                                    <div class="row mb-3">
                                        <div class="col-sm-6">
                                            <input type="date" class="form-control" id="sleep-start-date" required>
                                        </div>
                                        <div class="col-sm-6">
                                            <input type="time" class="form-control" id="sleep-start-time" required>
                                        </div>
                                    </div>
                                    
                                    <button id="start-sleep" class="btn btn-info w-100">Start Sleep</button>
                                </div>
                                
                                <div id="active-sleep-section" style="display: none;">
                                    <div class="alert alert-info d-flex align-items-center" role="alert">
                                        <div class="spinner-grow spinner-grow-sm text-info me-3" role="status" aria-hidden="true"></div>
                                        <div>
                                            <strong>Sleep In Progress</strong><br>
                                            <small>Started: <span id="sleep-start-display"></span></small><br>
                                            <small>Duration: <span id="sleep-duration-display"></span></small>
                                        </div>
                                    </div>
                                    
                                    <div class="border-top pt-3">
                                        <div class="row g-2">
                                            <div class="col-12">
                                                <button id="end-sleep-now" class="btn btn-outline-info btn-sm w-100">Wake Up Now</button>
                                                <small class="text-muted d-block text-center">End Sleep At Current Time</small>
                                            </div>
                                        </div>
                                        
                                        <div class="mt-3">
                                            <div class="row mb-2">
                                                <div class="col-sm-6">
                                                    <input type="date" class="form-control form-control-sm" id="wake-date" required>
                                                </div>
                                                <div class="col-sm-6">
                                                    <input type="time" class="form-control form-control-sm" id="wake-time" required>
                                                </div>
                                            </div>
                                            
                                            <textarea class="form-control form-control-sm mb-2" id="sleep-notes" placeholder="How Did You Sleep? Any Observations..." rows="2"></textarea>
                                            
                                            <button id="complete-sleep" class="btn btn-success btn-sm w-100">Complete Sleep</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            
                <!-- Analytics Section -->
                <h2 class="mt-5 mb-3">Analytics & History</h2>
                
                <div class="d-flex flex-column gap-4">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="card-title mb-0">Weight Progress</h5>
                        </div>
                        <div class="card-body">
                            <div class="chart-container mb-3">
                                <canvas id="weight-canvas" width="400" height="200"></canvas>
                            </div>
                            <div id="weight-history" class="history-list"></div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h5 class="card-title mb-0">Fasting History</h5>
                        </div>
                        <div class="card-body">
                            <div id="fasting-history" class="history-list"></div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h5 class="card-title mb-0">Sleep Progress</h5>
                        </div>
                        <div class="card-body">
                            <div class="chart-container mb-3">
                                <canvas id="sleep-canvas" width="400" height="200"></canvas>
                            </div>
                            <div id="sleep-history" class="history-list"></div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <!-- Edit Sleep Modal -->
    <div class="modal fade" id="editSleepModal" tabindex="-1" aria-labelledby="editSleepModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editSleepModalLabel">
                        <i class="bi bi-pencil me-2"></i>Edit Sleep Session
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="edit-sleep-form">
                        <input type="hidden" id="edit-sleep-id">
                        
                        <div class="row mb-3">
                            <div class="col-sm-6">
                                <label for="edit-sleep-start-date" class="form-label">Bedtime Date</label>
                                <input type="date" class="form-control" id="edit-sleep-start-date" required>
                            </div>
                            <div class="col-sm-6">
                                <label for="edit-sleep-start-time" class="form-label">Bedtime</label>
                                <input type="time" class="form-control" id="edit-sleep-start-time" required>
                            </div>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-sm-6">
                                <label for="edit-sleep-end-date" class="form-label">Wake Date</label>
                                <input type="date" class="form-control" id="edit-sleep-end-date">
                            </div>
                            <div class="col-sm-6">
                                <label for="edit-sleep-end-time" class="form-label">Wake Time</label>
                                <input type="time" class="form-control" id="edit-sleep-end-time">
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="edit-sleep-notes" class="form-label">Notes</label>
                            <textarea class="form-control" id="edit-sleep-notes" rows="3" placeholder="How did you sleep? Any observations..."></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="healthTracker.saveSleepEdit()">Save Changes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Weight Modal -->
    <div class="modal fade" id="editWeightModal" tabindex="-1" aria-labelledby="editWeightModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editWeightModalLabel">
                        <i class="bi bi-pencil me-2"></i>Edit Weight Entry
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="edit-weight-form">
                        <input type="hidden" id="edit-weight-id">
                        
                        <div class="row mb-3">
                            <div class="col-sm-6">
                                <label for="edit-weight-value" class="form-label">Weight</label>
                                <div class="input-group">
                                    <input type="number" class="form-control" id="edit-weight-value" step="0.1" required>
                                    <span class="input-group-text" id="edit-weight-unit">lbs</span>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <label for="edit-weight-date" class="form-label">Date</label>
                                <input type="date" class="form-control" id="edit-weight-date" required>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="edit-weight-notes" class="form-label">Notes</label>
                            <textarea class="form-control" id="edit-weight-notes" rows="3" placeholder="Any observations or notes about this weight measurement..."></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="healthTracker.saveWeightEdit()">Save Changes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Fasting Modal -->
    <div class="modal fade" id="editFastingModal" tabindex="-1" aria-labelledby="editFastingModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editFastingModalLabel">
                        <i class="bi bi-pencil me-2"></i>Edit Fasting Session
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="edit-fasting-form">
                        <input type="hidden" id="edit-fasting-id">
                        
                        <div class="mb-3">
                            <label for="edit-fasting-target" class="form-label">Target Duration</label>
                            <select class="form-select" id="edit-fasting-target" required>
                                <option value="16">16:8 - 16 Hours Fasting / 8 Hours Eating</option>
                                <option value="18">18:6 - 18 Hours Fasting / 6 Hours Eating</option>
                                <option value="20">20:4 - 20 Hours Fasting / 4 Hours Eating</option>
                                <option value="24">24:0 - 24 Hours Fasting / OMAD</option>
                            </select>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-sm-6">
                                <label for="edit-fasting-start-date" class="form-label">Start Date</label>
                                <input type="date" class="form-control" id="edit-fasting-start-date" required>
                            </div>
                            <div class="col-sm-6">
                                <label for="edit-fasting-start-time" class="form-label">Start Time</label>
                                <input type="time" class="form-control" id="edit-fasting-start-time" required>
                            </div>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-sm-6">
                                <label for="edit-fasting-end-date" class="form-label">End Date</label>
                                <input type="date" class="form-control" id="edit-fasting-end-date">
                            </div>
                            <div class="col-sm-6">
                                <label for="edit-fasting-end-time" class="form-label">End Time</label>
                                <input type="time" class="form-control" id="edit-fasting-end-time">
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="edit-fasting-notes" class="form-label">Notes</label>
                            <textarea class="form-control" id="edit-fasting-notes" rows="3" placeholder="How did the fast go? Any observations..."></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="healthTracker.saveFastingEdit()">Save Changes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Recommendation Modal -->
    <div class="modal fade" id="recommendationModal" tabindex="-1" aria-labelledby="recommendationModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="recommendationModalLabel">
                        <i class="bi bi-lightbulb me-2"></i>Smart Recommendation
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-info mb-3">
                        <i class="bi bi-info-circle me-2"></i>
                        <strong>AI-Powered Insight:</strong> Based on your session notes and data.
                    </div>
                    <div class="recommendation-content">
                        <div class="d-flex align-items-start">
                            <div class="recommendation-icon me-3">
                                <i class="bi bi-robot fs-3 text-primary"></i>
                            </div>
                            <div class="flex-grow-1">
                                <p id="recommendationText" class="mb-3"></p>
                                <div class="text-muted small">
                                    <i class="bi bi-shield-check me-1"></i>
                                    This recommendation is generated by AI and is not medical advice. Consult healthcare professionals for medical concerns.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                        <i class="bi bi-bookmark me-1"></i>Save for Later
                    </button>
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">
                        <i class="bi bi-check-lg me-1"></i>Got It
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="app.js"></script>
</body>
</html>